{% extends "master.html" %}
{% block link %}
    <link rel="stylesheet" href="/static/css/ipPool.css">
{% endblock %}

{% block content %}
    <div>
        <div class="ip_header">IP信息</div>
        <div class="ip_content">
            <div class="query">
                <form id="ip_opertion" action="/home/ipPool" method="post">
                    <div class="query_1">
                        <div class="query_2 left">
                            <div class="query_n left">IP地址</div>
                            <div class="query_i left"><input type="text" name="ip_addr"></div>
                        </div>
                        <div class="query_2 left">
                            <div class="query_n left">子网掩码</div>
                            <div class="query_i left"><input type="text" name="ip_netmask"></div>
                        </div>
                        <div class="query_2 left">
                            <div class="query_n left">所属人</div>
                            <div class="query_i left"><input type="text" name="ip_owner"></div>
                        </div>
                    </div>
                    <div class="query_1">
                        <div class="query_2 left">
                            <div class="query_n left">类型</div>
                            <div class="query_i left"><input type="text" name="ip_type"></div>
                        </div>
                        <div class="query_2 left">
                            <div class="query_n left">所属组</div>
                            <div class="query_i left">
                                <select style="width: 194px;height: 26px;" name="ip_group">
                                    {% for obj in dept %}
                                    <option value="{{ obj.id }}">{{ obj.deptname }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="query_2 left">
                            <div class="query_i left" style="padding-left:20px;"><input  id="ipInfo_query" style="width:60px;height:20px;background-color: blue" type="submit" value="查询"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="res">
                <table border="1" cellspacing="0" style="border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>IP地址</th>
                            <th>子网掩码</th>
                            <th>所有者</th>
                            <th>所属组</th>
                            <th>类型</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for row in ip_data %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ row.addr }}</td>
                            <td>{{ row.netmask }}</td>
                            <td>{{ row.owner}}</td>
                            <td>{{ row.relgroup_id }}</td>
                            <td>{{ row.ip_type}}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}
{% block js %}
{#    <script>#}
{#            $('#ipInfo_query').click(function(){#}
{#                console.log("js执行了")#}
{#                var ip_addr = $('#ip_opertion').find('input[name="ip_addr"]').val()#}
{#                var ip_netmask = $('#ip_opertion').find('input[name="ip_netmask"]').val()#}
{#                var ip_owner = $('#ip_opertion').find('input[name="ip_owner"]').val()#}
{#                var ip_type = $('#ip_opertion').find('input[name="ip_type"]').val()#}
{#                var ip_group = $('#ip_opertion').find('input[name="ip_group"]').val()#}
{##}
{#                if( ip_addr || ip_netmask || ip_owner || ip_type || ip_group ){#}
{#                    $.ajax({#}
{#                        url:'/home/ipPool',#}
{#                        type:'POST',#}
{#                        data:$('#ip_opertion').serialize(),#}
{#                        dataType:'JSON',#}
{#                        success:function(data){#}
{#                            #}
{#                            }#}
{#                        })#}
{#                }else{#}
{#                    console.log("error")#}
{#                }#}
{#            })#}
{#    </script>#}
{% endblock %}